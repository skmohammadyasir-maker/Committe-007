<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Club Quiz Engine — ক্লাব কুইজ</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&display=swap" rel="stylesheet">

  <!-- Firebase Auth যোগ করা হলো -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <style>
    :root { --accent: #7c3aed; --muted:#6b7280; }
    body { font-family: 'Noto Sans Bengali', system-ui, -apple-system, sans-serif; }
    .btn { @apply px-4 py-2 rounded-full font-semibold shadow-sm; }
    .glass { background: rgba(255,255,255,0.7); backdrop-filter: blur(6px); }
    .answer-btn { transition: transform .15s, box-shadow .15s; }
    .answer-btn:active { transform: scale(.99); }
    .is-correct { box-shadow: 0 6px 25px rgba(34,197,94,.14); border: 2px solid #22c55e; }
    .is-wrong { box-shadow: 0 6px 25px rgba(239,68,68,.12); border: 2px solid #ef4444; opacity: .95; }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-indigo-50 min-h-screen">
  <div id="root" class="min-h-screen"></div>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <script type="text/babel">
  const { useState, useEffect, useRef } = React;

  /***** Firebase Config (same as before) *****/
  const firebaseConfig = {
    apiKey: "REPLACE_API_KEY",
    authDomain: "REPLACE_PROJECT.firebaseapp.com",
    projectId: "REPLACE_PROJECT",
    storageBucket: "REPLACE_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID",
  };
  /******************************************/

  // Init Firebase
  if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const auth = firebase.auth();

  // Google Auth Provider
  const provider = new firebase.auth.GoogleAuthProvider();

  // SAMPLE QUESTIONS (unchanged)
  const SAMPLE_QUESTIONS = [...(same questions as before)...]

  // Main App function (unchanged logic except login added)
  function App(){
    const [user, setUser] = useState(null);

    // load session
    useEffect(()=> {
      auth.onAuthStateChanged(u=>{
        if(u){
          setUser({ id:u.uid, name:u.displayName, mobile:u.phoneNumber || "N/A" });
          localStorage.setItem("club_quiz_user", JSON.stringify({id:u.uid,name:u.displayName}));
        }
      });
    }, []);

    // ADD — Google Login
    const handleGoogleLogin = async ()=>{
      const result = await auth.signInWithPopup(provider);
      const u = result.user;
      
      const ref = db.collection('players').doc(u.uid);
      const snap = await ref.get();
      if(!snap.exists){
        await ref.set({
          name: u.displayName,
          mobile: u.phoneNumber || "N/A",
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          points:0, correct:0, wrong:0, played:false
        });
      }

      setUser({ id:u.uid, name:u.displayName });
    };

    // Existing Mobile Login System (UNCHANGED)
    const handleLogin = async ({ name, mobile }) => {
      const pid = mobile.replace(/\D/g,'') || ('m'+Date.now());
      const ref = db.collection('players').doc(pid);
      const snap = await ref.get();
      const payload = { name, mobile, createdAt: firebase.firestore.FieldValue.serverTimestamp() };
      if (!snap.exists) await ref.set({ ...payload, correct:0, wrong:0, points:0, played:false, avgTime:0, totalAnswered:0 });
      else await ref.update({ name, mobile });
      const u = { id: pid, name, mobile };
      localStorage.setItem('club_quiz_user', JSON.stringify(u));
      setUser(u);
    };

    /* REST OF YOUR ORIGINAL CODE BELOW — UNCHANGED */
